{"version":3,"sources":["../../src/pages/game-tabs/game-tabs.module.ts","../../src/pages/game-tabs/game-tabs.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { GameTabsPage } from './game-tabs';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    GameTabsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(GameTabsPage),\r\n  ],\r\n})\r\nexport class GameTabsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game-tabs/game-tabs.module.ts","import { Component, ViewChild } from \"@angular/core\";\r\nimport {\r\n  IonicPage,\r\n  NavController,\r\n  NavParams,\r\n  Events,\r\n  Platform,\r\n  AlertController,\r\n  Navbar\r\n} from \"ionic-angular\";\r\nimport { BasePage } from \"../../common/BasePage\";\r\nimport { AuthService } from \"../../services/auth.service\";\r\nimport { ScreenOrientation } from \"@ionic-native/screen-orientation\";\r\nimport { AngularFireOfflineDatabase } from \"angularfire2-offline/database\";\r\nimport { ShortUrlService } from \"angular-shorturl\";\r\n// import { SocialShare } from 'angular-socialshare';\r\n\r\n/**\r\n * Generated class for the GameTabsPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n  name: \"game-tabs\",\r\n  segment: \"game-tabs/:id/:audienceId\"\r\n})\r\n@Component({\r\n  selector: \"page-game-tabs\",\r\n  templateUrl: \"game-tabs.html\"\r\n})\r\nexport class GameTabsPage extends BasePage {\r\n  @ViewChild(Navbar)\r\n  navbar: Navbar;\r\n  scorePage = \"live-match\";\r\n  formationPage = \"formation\";\r\n  chatPage = \"chat\";\r\n  scoreParams: any;\r\n  formationParams: any;\r\n  chatParams: any;\r\n  rotation = \"phone-landscape\";\r\n  isLandscape = false;\r\n  isLocked = false;\r\n  tabIndex: number = 0;\r\n  audienceIdForShare: string;\r\n  shortenedUrl: string;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    public authService: AuthService,\r\n    public alertCtrl: AlertController,\r\n    public platform: Platform,\r\n    private screenOrientation: ScreenOrientation,\r\n    public afoDatabase: AngularFireOfflineDatabase,\r\n    private shortUrlService: ShortUrlService,\r\n    public events: Events\r\n  ) {\r\n    super(navCtrl, authService, alertCtrl, platform);\r\n    this.TAG = \"GameTabsPage\";\r\n    this.scoreParams = {\r\n      id: navParams.get(\"id\"),\r\n      audienceId: navParams.get(\"audienceId\")\r\n    };\r\n    this.formationParams = {\r\n      id: undefined,\r\n      onEdit: false,\r\n      fromLive: true\r\n    }\r\n    this.chatParams = {\r\n      id: navParams.get(\"id\"),\r\n      audienceId: navParams.get(\"audienceId\")\r\n    }\r\n    this.logOnConsole(this.TAG, this.scoreParams);\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.initOnScreenOrientationChange();\r\n    this.onInit(this.navbar);\r\n  }\r\n\r\n\r\n  shortAudienceUrl() {\r\n    var re = /undefined/gi;\r\n    var url = window.location.href.replace(re, this.audienceIdForShare);\r\n    if(url.includes(\"loading\")){\r\n      this.logOnConsole(this.TAG, \"retry, it contains loading: \" + url);\r\n      // setTimeout(this.shortAudienceUrl(), 5000);\r\n      \r\n    }else{\r\n      this.logOnConsole(this.TAG, \"ref: \" + url);\r\n      this.shortUrlService.load(url).then(data => {\r\n        this.logOnConsole(this.TAG, \"shortUrlService: \" + data);\r\n        this.shortenedUrl = data;\r\n      });\r\n    }\r\n  }\r\n\r\n  onUserChange(user: any) {\r\n    this.logOnConsole(this.TAG, \"on user change live\" + user);\r\n    if (user != null) {\r\n      var id = \"\";\r\n      this.logOnConsole(\r\n        this.TAG,\r\n        \"1, audience: \" + (this.scoreParams.audienceId == \"undefined\")\r\n      );\r\n      if (\r\n        this.scoreParams.audienceId == undefined ||\r\n        this.scoreParams.audienceId == \"undefined\" ||\r\n        this.scoreParams.audienceId == \":audienceId\"\r\n      ) {\r\n        this.logOnConsole(this.TAG, \"2\");\r\n        id = this.authService.user.uid;\r\n        this.retrieveGameInfo(id, false);\r\n      } else {\r\n        this.logOnConsole(this.TAG, \"3\");\r\n        this.findUserFromAudienceId();\r\n      }\r\n    } else {\r\n      this.logOnConsole(this.TAG, \"4\");\r\n      this.findUserFromAudienceId();\r\n    }\r\n    this.logOnConsole(this.TAG, \"5\");\r\n    this.initOnScreenOrientationChange();\r\n  }\r\n\r\n  findUserFromAudienceId() {\r\n    var id = \"\";\r\n    var isAudience = true;\r\n    var users = this.afoDatabase.list(\"/users\");\r\n    users.subscribe(userList => {\r\n      userList.forEach(user => {\r\n        if (user.audienceId == this.scoreParams.audienceId) {\r\n          id = user.$key;\r\n          this.retrieveGameInfo(id, isAudience);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  retrieveGameInfo(userId: string, isAudience: boolean) {\r\n    var url = \"/users/\" + userId + \"/games\";\r\n    this.logOnConsole(this.TAG, url);\r\n    var games = this.afoDatabase.list(url);\r\n    games.subscribe(items => {\r\n      var found = false;\r\n      // items is an array\r\n      items.forEach(item => {\r\n        if (item.id == this.scoreParams.id) {\r\n          this.logOnConsole(this.TAG, \"Item:\", item);\r\n          found = true;\r\n          if (item.live && !isAudience) {\r\n            this.askBeforeGoBack = true;\r\n          }\r\n          this.formationParams.id = item.homeTeamId;\r\n        }\r\n      });\r\n      if (!found) {\r\n        //TODO: error message\r\n      }\r\n    });\r\n    var audienceRef = this.afoDatabase.object(\r\n      \"/users/\" + userId + \"/audienceId\"\r\n    );\r\n    audienceRef.subscribe(audience => {\r\n      this.audienceIdForShare = audience.$value;\r\n    });\r\n  }\r\n\r\n  rotate() {\r\n    // console.log(this.screenOrientation.type);\r\n    if (\r\n      this.screenOrientation.type !=\r\n        this.screenOrientation.ORIENTATIONS.LANDSCAPE &&\r\n      this.screenOrientation.type !=\r\n        this.screenOrientation.ORIENTATIONS.LANDSCAPE_PRIMARY &&\r\n      this.screenOrientation.type !=\r\n        this.screenOrientation.ORIENTATIONS.LANDSCAPE_SECONDARY\r\n    ) {\r\n      document.body.webkitRequestFullscreen();\r\n      if (!this.isLocked) {\r\n        this.screenOrientation.lock(\r\n          this.screenOrientation.ORIENTATIONS.LANDSCAPE\r\n        );\r\n        this.isLocked = true;\r\n      }\r\n      this.isLandscape = true;\r\n      this.rotation = \"phone-portrait\";\r\n    } else {\r\n      if (!this.isLocked) {\r\n        this.screenOrientation.lock(\r\n          this.screenOrientation.ORIENTATIONS.PORTRAIT\r\n        );\r\n        this.isLocked = true;\r\n      }\r\n      var self = this;\r\n      setTimeout(function() {\r\n        if (this.isLocked) {\r\n          self.screenOrientation.unlock();\r\n          self.isLocked = false;\r\n        }\r\n        document.webkitExitFullscreen();\r\n        self.isLandscape = false;\r\n        self.rotation = \"phone-landscape\";\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  initOnScreenOrientationChange() {\r\n    this.screenOrientation.onChange().subscribe(type => {\r\n      this.logOnConsole(this.TAG, \"on change: \" + type);\r\n      if (\r\n        this.screenOrientation.type !=\r\n          this.screenOrientation.ORIENTATIONS.LANDSCAPE &&\r\n        this.screenOrientation.type !=\r\n          this.screenOrientation.ORIENTATIONS.LANDSCAPE_PRIMARY &&\r\n        this.screenOrientation.type !=\r\n          this.screenOrientation.ORIENTATIONS.LANDSCAPE_SECONDARY\r\n      ) {\r\n        this.isLandscape = false;\r\n        this.rotation = \"phone-landscape\";\r\n      } else {\r\n        this.isLandscape = true;\r\n        this.rotation = \"phone-portrait\";\r\n      }\r\n    });\r\n  }\r\n\r\n  public transition(e): void {\r\n    this.tabIndex = e.index;\r\n  }\r\n\r\n  share() {\r\n    let newVariable: any;\r\n    newVariable = window.navigator;\r\n    if (newVariable && newVariable.share) {\r\n      newVariable\r\n        .share({\r\n          title: \"title\",\r\n          text: \"Segui la partita in diretta: \",\r\n          url: this.shortenedUrl\r\n        })\r\n        .then(() => console.log(\"Successful share\"))\r\n        .catch(error => console.log(\"Error sharing\", error));\r\n    } else {\r\n      alert(\"share not supported\");\r\n    }\r\n  }\r\n\r\n  sharePopup(){\r\n    this.shortAudienceUrl();\r\n    let prompt = this.alertCtrl.create({\r\n      title: \"Condividi la partita in corso\",\r\n      message: \"Condividi la partita con i tuoi amici! Fai sapere come sta andando la tua squadra del cuore, punto per punto ;)\",\r\n      buttons: [\r\n        {\r\n          text: \"Condividi\",\r\n          handler: data => {\r\n            this.share();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    prompt.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game-tabs/game-tabs.ts"],"sourceRoot":""}